# Phase 2 Comprehensive Sweep: MantisV2 Frozen Embeddings + Neural Classification Heads
#
# Updated after Phase 1 findings:
#   - Context window is the dominant factor → default to 241min (120+1+120)
#   - L2 is best layer → default to L2
#   - Only output_token="combined" works in MantisV2
#
# 3 parallel sweep groups (A/B/C) for optimal neural head configuration.
#
# Usage:
#   cd examples/classification/apc_occupancy
#
#   # All groups (sequential, ~6-10h)
#   python training/run_phase2_sweep.py --config training/configs/occupancy-phase2.yaml --device cuda
#
#   # Single group (parallel GPU servers)
#   python training/run_phase2_sweep.py --config training/configs/occupancy-phase2.yaml --group A --device cuda
#   python training/run_phase2_sweep.py --config training/configs/occupancy-phase2.yaml --group B --device cuda
#   python training/run_phase2_sweep.py --config training/configs/occupancy-phase2.yaml --group C --device cuda

seed: 42
output_dir: results/phase2_sweep
split_date: "2026-02-15"

# --- Model ---
model:
  pretrained_name: "paris-noah/MantisV2"
  output_token: "combined"

# --- Data ---
data:
  sensor_csv: "/group-volume/ts-dataset/AIHub/enter_leave/merged_processed_data_with_motion_count_0209_0223_interval1.csv"
  label_csv: "/group-volume/ts-dataset/AIHub/enter_leave/occupancy_events_0210_0219_processed_with_none_cleaned.csv"
  label_format: "events"
  initial_occupancy: 0
  binarize: true

# --- Defaults (updated from Phase 1 best: 241min context, L2) ---
default_channels:
  - d620900d_motionSensor
  - 408981c2_contactSensor

# Updated: 120+1+120 = 241min context (was 4+1+4 = 9min)
default_context_before: 120
default_context_after: 120
# Updated: L2 (was L3)
default_layer: 2
stride: 1

# --- Training ---
training:
  epochs: 200
  lr: 1.0e-3
  weight_decay: 0.01
  label_smoothing: 0.0
  early_stopping_patience: 30
