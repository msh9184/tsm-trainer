# Phase 2 v2: Focused Augmentation + Redesigned Stage Sweep
#
# 5-stage sweep:
#   Stage 1: Context window exploration (4 configs)
#   Stage 2: Augmentation techniques (8 configs)
#   Stage 3: Head architecture (6 configs)
#   Stage 4: Embedding processing â€” layer selection + concat (5 configs)
#   Stage 5: Final combination + TTA (4 configs)
#
# Usage:
#   cd examples/classification/apc_enter_leave
#   python training/run_phase2_finetune.py --config training/configs/enter-leave-phase2.yaml
#   python training/run_phase2_finetune.py --config ... --stages 1       # Stage 1 only
#   python training/run_phase2_finetune.py --config ... --stages 2 3     # Stages 2-3
#   python training/run_phase2_finetune.py --config ... --device cpu      # CPU-only

seed: 42
output_dir: results/phase2_finetune

model:
  pretrained_name: "paris-noah/MantisV2"
  output_token: "combined"
  device: "cuda"

data:
  sensor_csv: "/group-volume/ts-dataset/AIHub/enter_leave/merged_processed_data_with_motion_count_0209_0223_interval1.csv"
  events_csv: "/group-volume/ts-dataset/AIHub/enter_leave/occupancy_events_0210_0219_processed_with_none_cleaned.csv"
  column_names_csv: "/group-volume/ts-dataset/AIHub/enter_leave/merged_data_with_motion_count_0209_0223.csv"
  include_none: true
  # Default channels: motionSensor + contactSensor (Phase 1 best)
  channels:
    - d620900d_motionSensor
    - 408981c2_contactSensor

# Default context (Stage 1 will explore alternatives)
dataset:
  context_mode: bidirectional
  context_before: 4
  context_after: 4

# Default training hyperparameters
training:
  epochs: 200
  lr: 1.0e-3
  weight_decay: 0.01
  label_smoothing: 0.0
  early_stopping_patience: 30

cv:
  primary_method: loocv

# Which stages to run (1-5)
sweep:
  stages: [1, 2, 3, 4, 5]

# Stage 1: Context window exploration configs
# Each config re-extracts MantisV2 embeddings with different window sizes
context_exploration:
  - name: "9min (4+1+4)"
    context_before: 4
    context_after: 4
    context_mode: bidirectional
  - name: "21min (10+1+10)"
    context_before: 10
    context_after: 10
    context_mode: bidirectional
  - name: "41min (20+1+20)"
    context_before: 20
    context_after: 20
    context_mode: bidirectional
  - name: "31min backward (30+1+0)"
    context_before: 30
    context_after: 0
    context_mode: bidirectional
